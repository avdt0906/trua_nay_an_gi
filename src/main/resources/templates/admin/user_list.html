<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Nhà hàng chờ phê duyệt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Sidebar Styles -->
    <th:block th:replace="~{admin/fragments/navbar :: sidebar-styles}"></th:block>
</head>

<body class="d-flex">

    <!-- Sidebar -->
    <div th:replace="~{admin/fragments/navbar :: sidebar(${activePage})}"></div>

    <!-- Main Content -->
    <main class="flex-grow-1 p-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="mb-4">Danh sách người dùng</h1>
            <a th:href="@{/admin}" class="btn btn-secondary me-2">
                <i class="fas fa-arrow-left me-1"></i> Quay lại
            </a>
        </div>

    <table class="table table-bordered table-striped align-middle">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Tên đăng nhập</th>
            <th>Họ tên</th>
            <th>Email</th>
            <th>Số điện thoại</th>
            <th>Roles</th>
            <th>Hành động</th>
        </tr>
        </thead>
        <tbody>
        <!-- Lặp qua danh sách users -->
        <tr th:each="user : ${users}">
            <td th:text="${user.id}">1</td>
            <td th:text="${user.username}">username</td>
            <td th:text="${user.fullName}">Full Name</td>
            <td th:text="${user.email}">email@example.com</td>
            <td th:text="${user.phone}">0123456789</td>
            <td>
                <span th:each="r : ${user.roles}"
                      th:text="${r.name}"
                      class="badge bg-primary me-1"></span>
            </td>
            <td>
                <a th:href="@{/admin/users/edit/{id}(id=${user.id})}"
                   class="btn btn-sm btn-warning me-1">Sửa</a>
                <a th:href="@{/admin/users/delete/{id}(id=${user.id})}"
                   class="btn btn-sm btn-danger"
                   onclick="return confirm('Bạn có chắc chắn muốn xóa người dùng này?');">Xóa</a>
            </td>
        </tr>
        </tbody>
    </table>

    <!-- Nếu có phân trang -->
    <div th:if="${totalPages != null}" class="d-flex justify-content-center">
        <ul class="pagination">
            <li th:classappend="${currentPage == 0} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/users/list(page=${currentPage-1}, size=${size})}">« Trước</a>
            </li>
            <li th:each="i : ${#numbers.sequence(0, totalPages-1)}"
                th:classappend="${i == currentPage} ? 'active'">
                <a class="page-link"
                   th:text="${i + 1}"
                   th:href="@{/users/list(page=${i}, size=${size})}"></a>
            </li>
            <li th:classappend="${currentPage + 1 == totalPages} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/users/list(page=${currentPage+1}, size=${size})}">Sau »</a>
            </li>
        </ul>
    </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</div>
</body>
</html>
